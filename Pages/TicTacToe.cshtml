@page
@model Project_MMXXIII.Pages.TicTacToeModel
@{

}

<!-- btn btn-light btn-circle btn-xl -->

<div id="game-name">
    <h1>Tic Tac Toe!</h1>
</div>


<div id="tictactoe-container">

    <div class="button-holder">
        <button class="actual-button" id="x1, y1"></button>
    </div>
    <div class="vertical-line"></div>
    <div class="button-holder">
        <button class="actual-button" id="x2, y1"></button>
    </div>
    <div class="vertical-line"></div>
    <div class="button-holder">
        <button class="actual-button" id="x3, y1"></button>
    </div>

    <div class="horizontal-line"></div>

    <div class="button-holder">
        <button class="actual-button" id="x1, y2"></button>
    </div>

    <div class="vertical-line"></div>
    <div class="button-holder">
        <button class="actual-button" id="x2, y2"></button>
    </div>
    <div class="vertical-line"></div>
    <div class="button-holder">
        <button class="actual-button" id="x3, y2"></button>
    </div>

    <div class="horizontal-line"></div>

    <div class="button-holder">
        <button class="actual-button" id="x1, y3"></button>
    </div>

    <div class="vertical-line"></div>
    <div class="button-holder">
        <button class="actual-button" id="x2, y3"></button>
    </div>
    <div class="vertical-line"></div>
    <div class="button-holder">
        <button class="actual-button" id="x3, y3"></button>
    </div>
</div>


<script>
      document.getElementById("x1, y1").addEventListener("click", function() { clickedField(1,1);});
      document.getElementById("x1, y2").addEventListener("click", function() { clickedField(1,2);});
      document.getElementById("x1, y3").addEventListener("click", function() { clickedField(1,3);});
      document.getElementById("x2, y1").addEventListener("click", function() { clickedField(2,1);});
      document.getElementById("x2, y2").addEventListener("click", function() { clickedField(2,2);});
      document.getElementById("x2, y3").addEventListener("click", function() { clickedField(2,3);});
      document.getElementById("x3, y1").addEventListener("click", function() { clickedField(3,1);});
      document.getElementById("x3, y2").addEventListener("click", function() { clickedField(3,2);});
      document.getElementById("x3, y3").addEventListener("click", function() { clickedField(3,3);});
        
      var scheme = document.location.protocol === "https:" ? "wss" : "ws";
      var port = document.location.port ? (":" + document.location.port) : "";
      var socket;
      
      var connectionUrl = scheme + "://" + document.location.hostname + port + "/ws";

      socket = new WebSocket(connectionUrl);

      function clickedField(x, y) {
          if (!socket || socket.readyState !== WebSocket.OPEN) {
              alert("Connection error!");
          }
          var data = "x" + x + ", y" + y;
          socket.send(data);
          
         console.log("HELLO");
      }
</script>